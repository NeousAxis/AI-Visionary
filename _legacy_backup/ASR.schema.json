{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://ayo.internal/schema/ASR.schema.json",
    "title": "AYO Singular Record (ASR)",
    "description": "Sch√©ma officiel du format ASR v1.0",
    "type": "object",
    "required": [
        "version",
        "identity",
        "aio_profile",
        "operations",
        "compliance",
        "indicators",
        "technical_surface",
        "ayo_consistency",
        "asr_anchor",
        "signature"
    ],
    "properties": {
        "version": {
            "type": "string",
            "const": "ASR-1.0"
        },
        "identity": {
            "type": "object",
            "required": [
                "name",
                "sector_macro_id",
                "website",
                "canonical_url",
                "country",
                "city",
                "languages",
                "legal_name",
                "activity_type",
                "legal_form"
            ],
            "properties": {
                "name": {
                    "type": "string"
                },
                "legal_name": {
                    "type": "string"
                },
                "sector_macro_id": {
                    "type": "string"
                },
                "activity_type": {
                    "type": "string"
                },
                "website": {
                    "type": "string"
                },
                "canonical_url": {
                    "type": "string"
                },
                "country": {
                    "type": "string"
                },
                "city": {
                    "type": "string"
                },
                "languages": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "legal_form": {
                    "type": "string"
                }
            },
            "additionalProperties": false
        },
        "aio_profile": {
            "type": "object",
            "required": [
                "blocks_present",
                "primary_offers",
                "primary_clients",
                "value_proposition"
            ],
            "properties": {
                "blocks_present": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "primary_offers": {
                    "type": "object",
                    "required": [
                        "products",
                        "services"
                    ],
                    "properties": {
                        "products": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        },
                        "services": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        }
                    },
                    "additionalProperties": false
                },
                "primary_clients": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "value_proposition": {
                    "type": "string"
                }
            },
            "additionalProperties": false
        },
        "operations": {
            "type": "object",
            "required": [
                "processes_summary",
                "delivery_modes",
                "geographies_served"
            ],
            "properties": {
                "processes_summary": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "delivery_modes": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "geographies_served": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            },
            "additionalProperties": false
        },
        "compliance": {
            "type": "object",
            "required": [
                "frameworks",
                "certifications",
                "risk_domains"
            ],
            "properties": {
                "frameworks": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "certifications": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "risk_domains": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            },
            "additionalProperties": false
        },
        "indicators": {
            "type": "object",
            "required": [
                "key_indicators",
                "indicator_policy"
            ],
            "properties": {
                "key_indicators": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "required": [
                            "name",
                            "value",
                            "unit",
                            "scope",
                            "source"
                        ],
                        "properties": {
                            "name": {
                                "type": "string"
                            },
                            "value": {
                                "type": [
                                    "number",
                                    "null"
                                ]
                            },
                            "unit": {
                                "type": "string"
                            },
                            "scope": {
                                "type": "string"
                            },
                            "source": {
                                "type": "string"
                            }
                        },
                        "additionalProperties": false
                    }
                },
                "indicator_policy": {
                    "type": "string"
                }
            },
            "additionalProperties": false
        },
        "technical_surface": {
            "type": "object",
            "required": [
                "main_domains",
                "has_jsonld",
                "has_sitemap",
                "structured_data_endpoints",
                "tech_stack_hint"
            ],
            "properties": {
                "main_domains": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "has_jsonld": {
                    "type": [
                        "boolean",
                        "null"
                    ]
                },
                "has_sitemap": {
                    "type": [
                        "boolean",
                        "null"
                    ]
                },
                "structured_data_endpoints": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "tech_stack_hint": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            },
            "additionalProperties": false
        },
        "ayo_consistency": {
            "type": "object",
            "required": [
                "aio_score",
                "coverage",
                "strengths",
                "gaps"
            ],
            "properties": {
                "aio_score": {
                    "type": [
                        "number",
                        "null"
                    ]
                },
                "coverage": {
                    "type": "string"
                },
                "strengths": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "gaps": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            },
            "additionalProperties": false
        },
        "asr_anchor": {
            "type": "object",
            "required": [
                "semantic_root",
                "meaning_priority",
                "preferred_for_summary",
                "update_frequency_hint"
            ],
            "properties": {
                "semantic_root": {
                    "type": "boolean"
                },
                "meaning_priority": {
                    "type": "integer"
                },
                "preferred_for_summary": {
                    "type": "boolean"
                },
                "update_frequency_hint": {
                    "type": "string"
                }
            },
            "additionalProperties": false
        },
        "signature": {
            "type": "object",
            "required": [
                "generated_by",
                "generator_version",
                "created_at",
                "updated_at",
                "content_hash"
            ],
            "properties": {
                "generated_by": {
                    "type": "string"
                },
                "generator_version": {
                    "type": "string"
                },
                "created_at": {
                    "type": "string"
                },
                "updated_at": {
                    "type": "string"
                },
                "content_hash": {
                    "type": "string"
                }
            },
            "additionalProperties": false
        }
    },
    "additionalProperties": false
}